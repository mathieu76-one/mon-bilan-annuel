<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L'√âcologie Consciente - Mathieu Barbaud</title>
    <style>
        :root { --primary: #1a2a6c; --secondary: #b21f1f; --accent: #27ae60; --bg: #f0f2f5; }
        body { font-family: 'Segoe UI', sans-serif; line-height: 1.5; color: #333; max-width: 900px; margin: 0 auto; padding: 20px; background-color: var(--bg); }
        
        /* Navigation */
        .main-menu { display: flex; gap: 15px; justify-content: center; margin-bottom: 30px; sticky; top: 10px; z-index: 100; }
        .menu-btn { padding: 12px 25px; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; transition: 0.3s; background: white; color: var(--primary); box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .menu-btn.active { background: var(--primary); color: white; }

        .module { display: none; }
        .module.active { display: block; animation: fadeIn 0.4s; }

        .card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 8px 20px rgba(0,0,0,0.04); margin-bottom: 25px; }
        h1 { color: var(--primary); text-align: center; margin-bottom: 10px; }
        h2 { color: var(--secondary); border-left: 5px solid #fdbb2d; padding-left: 15px; margin-top: 0; margin-bottom: 20px; font-size: 1.4em; }
        
        .field { margin-bottom: 25px; }
        label { display: block; font-weight: bold; margin-bottom: 8px; color: #2c3e50; }
        
        .slider-container { display: flex; align-items: center; gap: 15px; background: #f9f9f9; padding: 10px; border-radius: 8px; margin-bottom: 10px; }
        input[type="range"] { flex-grow: 1; accent-color: var(--secondary); }
        .note-display { font-weight: bold; color: var(--secondary); min-width: 30px; font-size: 1.1em; }

        textarea, input[type="text"] { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-family: inherit; font-size: 0.95em; }
        textarea { height: 100px; line-height: 1.4; }
        
        /* Sadhana Items */
        .sadhana-item { display: flex; align-items: center; background: #f9f9f9; padding: 12px; border-radius: 8px; margin-bottom: 10px; border: 1px solid #eee; }
        .sadhana-item.done { background: #e8f5e9; border-color: var(--accent); opacity: 0.8; }
        .sadhana-item input[type="checkbox"] { width: 22px; height: 22px; cursor: pointer; accent-color: var(--accent); }
        .sadhana-item span { flex-grow: 1; margin-left: 15px; font-weight: 500; }

        .btn-main { background: var(--primary); color: white; padding: 15px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; }
        .btn-add { background: var(--accent); margin-top: 10px; }
        .btn-del { background: none; border: none; color: #e74c3c; cursor: pointer; font-size: 1.2em; padding: 0 10px; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @media print { .main-menu, .btn-main, .btn-del, .add-habit { display: none !important; } .card { box-shadow: none; border: 1px solid #eee; break-inside: avoid; } }
    </style>
</head>
<body>

    <h1>üåø Mon Espace de Conscience</h1>
    <p id="display-date" style="text-align: center; color: #7f8c8d; margin-top: -10px; margin-bottom: 20px; font-weight: bold;"></p>
    
    <div class="main-menu">
        <button class="menu-btn active" onclick="openModule('module1', this)">Bilan (Partie 1)</button>
        <button class="menu-btn" onclick="openModule('module2', this)">Le√ßons & Vision (Parties 2&3)</button>
        <button class="menu-btn" onclick="openModule('module3', this)">Ma Sadhana</button>
    </div>

    <div id="module1" class="module active">
        <div class="card">
            <h2>Partie 1 : Bilan de l'ann√©e pass√©e</h2>
            <div id="bilan-dynamic"></div>
        </div>
    </div>

    <div id="module2" class="module">
        <div class="card">
            <h2>Partie 2 : Tirer les le√ßons</h2>
            <div class="field"><label>Mes plus grandes r√©ussites cette ann√©e :</label><textarea id="l-r" class="auto-save" placeholder="Qu'est-ce qui m'a rendu fier ? Quelle victoire c√©l√©brer ?"></textarea></div>
            <div class="field"><label>Qu'est-ce qui m'a fait du bien ?</label><textarea id="l-b" class="auto-save" placeholder="Lieux, rituels ou personnes qui ont nourri mon √©nergie..."></textarea></div>
            <div class="field"><label>Impact pour les autres ou une cause :</label><textarea id="l-i" class="auto-save" placeholder="Qu'ai-je fait de bien pour autrui ou pour le monde ?"></textarea></div>
            <div class="field"><label>Ce que j'aurais aim√© √©viter :</label><textarea id="l-e" class="auto-save" placeholder="Habitudes ou r√©actions qui m'ont co√ªt√© de l'√©nergie..."></textarea></div>
            <div class="field"><label>Mes plus grands challenges :</label><textarea id="l-c" class="auto-save" placeholder="Quelles √©preuves et comment m'ont-elles fait grandir ?"></textarea></div>
            <div class="field"><label>Apprentissages sur moi-m√™me :</label><textarea id="l-a" class="auto-save" placeholder="Nouvelle v√©rit√© d√©couverte sur mon fonctionnement int√©rieur..."></textarea></div>
        </div>
        <div class="card">
            <h2>Partie 3 : Intentions & Buts</h2>
            <div class="field"><label>Le but essentiel de ma vie (Mission) :</label><textarea id="m-miss" class="auto-save"></textarea></div>
            <div class="field"><label>Mes 3 buts √† long terme (5-10 ans) :</label>
                <input type="text" id="lt1" class="auto-save" style="margin-bottom:8px" placeholder="But 1">
                <input type="text" id="lt2" class="auto-save" style="margin-bottom:8px" placeholder="But 2">
                <input type="text" id="lt3" class="auto-save" placeholder="But 3">
            </div>
            <div class="field"><label>Mes 3 buts pour l'ann√©e √† venir :</label>
                <input type="text" id="ba1" class="auto-save" style="margin-bottom:8px; border-left: 3px solid var(--accent)" placeholder="Objectif Annuel 1">
                <input type="text" id="ba2" class="auto-save" style="margin-bottom:8px; border-left: 3px solid var(--accent)" placeholder="Objectif Annuel 2">
                <input type="text" id="ba3" class="auto-save" style="border-left: 3px solid var(--accent)" placeholder="Objectif Annuel 3">
            </div>
        </div>
    </div>

    <div id="module3" class="module">
        <div class="card">
            <h2>Ma Sadhana du jour</h2>
            <div id="sadhana-list"></div>
            <div class="add-habit" style="margin-top:20px; border-top:1px solid #eee; padding-top:20px;">
                <label>Ajouter une nouvelle pratique :</label>
                <input type="text" id="new-habit-name" placeholder="Ex: Coh√©rence cardiaque...">
                <button class="btn-main btn-add" onclick="addHabit()">Ajouter √† ma liste</button>
            </div>
        </div>
    </div>

    <button class="btn-main" onclick="window.print()" style="margin-bottom: 40px;">Exporter en PDF / Imprimer</button>

    <script>
        const dateKey = new Date().toISOString().split('T')[0];
        document.getElementById('display-date').innerText = new Date().toLocaleDateString('fr-FR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });

        const guideData = [
            { id: "sante", n: "ü©∫ Sant√© et bien-√™tre", p: "√©quilibre g√©n√©ral du corps, sommeil, vitalit√©, digestion, manifestations du stress, maladies ou au contraire grande forme" },
            { id: "fin", n: "üí∞ Ressources et finances", p: "l'argent que j'ai gagn√©, les d√©penses du quotidien et les d√©penses impr√©vues, ma s√©r√©nit√© ou mon stress face √† l'argent, les achats et investissements..." },
            { id: "pro", n: "üíº Vie professionnelle et sociale", p
